<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3060 ì´ê¸° ì—°êµ¬ì†Œ (Realism Patch)</title>
    <style>
        /* [ê¸°ë³¸ ì„¤ì •] ê¹œë¹¡ì„ ë°©ì§€ ìœ ì§€ */
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Malgun Gothic', 'Segoe UI', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            overflow-y: scroll; 
        }

        h1 {
            color: #f7a600;
            margin-bottom: 5px;
            font-size: 28px;
            text-shadow: none;
        }

        p.subtitle { color: #888; font-size: 14px; margin-bottom: 20px; }

        .container {
            display: flex; flex-direction: column; gap: 20px; width: 100%; max-width: 1100px;
        }

        .controls-wrapper {
            background: #1e1e1e; padding: 20px; border-radius: 12px;
            border: 1px solid #333; 
        }

        .armor-controls {
            display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;
            margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #333;
        }

        .btn-group { display: flex; gap: 5px; }
        .btn-group button {
            background: #2c2c2c; border: 1px solid #444; color: #ccc; padding: 8px 16px;
            cursor: pointer; border-radius: 4px; font-size: 14px; 
        }
        .btn-group button.active {
            background: #f7a600; color: #000; font-weight: bold; border-color: #f7a600;
        }

        .range-container {
            width: 100%; padding: 0 20px; text-align: center; margin-bottom: 20px;
        }
        .range-label { font-size: 16px; color: #f7a600; font-weight: bold; margin-bottom: 10px; display: block; }
        input[type=range] { width: 100%; cursor: pointer; }
        
        .category-filter { display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; }
        .filter-btn {
            background: transparent; border: 1px solid #555; color: #888; padding: 6px 12px;
            cursor: pointer; border-radius: 20px; font-size: 13px;
        }
        .filter-btn.active { background: #f7a600; color: black; border-color: #f7a600; font-weight: bold; }

        .weapon-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; width: 100%;
        }
        
        /* [ì¹´ë“œ ìŠ¤íƒ€ì¼] ê¹œë¹¡ì„ ì—†ëŠ” ë²„ì „ ìœ ì§€ */
        .weapon-card {
            background: #252525;
            border: 2px solid #333; 
            border-radius: 8px; padding: 12px;
            text-align: center; cursor: pointer;
            position: relative; 
            display: flex; flex-direction: column; align-items: center;
            transform: none !important;
            transition: none !important;
            contain: content; 
        }
        .weapon-card:hover { border-color: #333; box-shadow: inset 0 0 0 2px #666; }
        .weapon-card.active-1 { box-shadow: inset 0 0 0 2px #f7a600; background: #2b2510; }
        .weapon-card.active-2 { box-shadow: inset 0 0 0 2px #fff; background: #333; }
        .weapon-card.hidden { display: none; }

        .dmg-badge {
            position: absolute; top: 5px; right: 5px;
            font-size: 12px; font-weight: bold; color: #f7a600;
            background: rgba(0,0,0,0.6); padding: 2px 6px; border-radius: 4px;
        }

        .weapon-img {
            width: 100px; height: 55px; object-fit: contain; margin-bottom: 8px;
            display: block; image-rendering: -webkit-optimize-contrast;
        }
        .weapon-name { font-weight: bold; font-size: 13px; display: block; margin-bottom: 2px; color: #fff; }
        .badge { font-size: 10px; padding: 2px 4px; border-radius: 3px; color: #000; font-weight: bold; }
        .badge.AR { background: #ff6b6b; } .badge.DMR { background: #4ecdc4; }
        .badge.SR { background: #ffe66d; } .badge.SMG { background: #ff9ff3; }
        .badge.LMG { background: #a29bfe; } .badge.SG { background: #fab1a0; } .badge.HG { background: #dfe6e9; }

        /* [ê²°ê³¼ íŒ¨ë„] */
        .result-panel {
            position: fixed; bottom: 20px; right: 20px; background: #1a1a1a;
            border: 2px solid #f7a600; padding: 20px; border-radius: 12px; 
            width: 420px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.8); 
            display: none; z-index: 9999;
        }
        .result-panel.show { display: block; }
        
        /* ë¹„êµ í…Œì´ë¸” */
        .comp-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .comp-table th { color: #888; padding: 5px; border-bottom: 1px solid #444; }
        .comp-table td { padding: 5px 4px; text-align: center; border-bottom: 1px solid #333; color: #eee; }
        
        .col-label { text-align: left !important; color: #aaa; width: 30%; }
        .col-w1 { width: 35%; color: #f7a600; font-weight: bold; border-left: 1px solid #333; }
        .col-w2 { width: 35%; color: #fff; font-weight: bold; border-left: 1px solid #333; }
        
        .better { color: #2ecc71 !important; } 
        .worse { color: #ff4757 !important; } 
        .section-header { background: #222; font-weight: bold; color: #ccc; text-align: center; padding: 4px; font-size: 11px; }

        .vs-badge { 
            background: #ff4757; color: #fff; font-weight: bold; 
            padding: 2px 6px; border-radius: 4px; font-size: 11px; vertical-align: middle;
        }
        
        .footer { margin-top: 40px; color: #444; font-size: 12px; }
    </style>
</head>
<body>

    <h1>ğŸ”« 3060 ì´ê¸° ì—°êµ¬ì†Œ</h1>
    <p class="subtitle">REALISM PATCH | í’€íŒŒì¸  ê¸°ì¤€ í˜„ì‹¤ ê³ ì¦ íŒ¨ì¹˜</p>

    <div class="container">
        <div class="controls-wrapper">
            <div class="range-container">
                <span class="range-label">ğŸ“ ì‚¬ê²© ê±°ë¦¬: <span id="dist-val" style="color:#fff;">0</span> m</span>
                <input type="range" id="dist-slider" min="0" max="1000" step="10" value="0" oninput="updateDistance(this.value)">
            </div>

            <div class="armor-controls">
                <div class="control-group">
                    <div style="text-align:center; color:#bbb; margin-bottom:5px;">ğŸ›¡ï¸ ì¡°ë¼</div>
                    <div class="btn-group" id="vest-group">
                        <button class="active" onclick="setArmor('vest', 0)">0</button>
                        <button onclick="setArmor('vest', 1)">1</button>
                        <button onclick="setArmor('vest', 2)">2</button>
                        <button onclick="setArmor('vest', 3)">3</button>
                    </div>
                </div>
                <div class="control-group">
                    <div style="text-align:center; color:#bbb; margin-bottom:5px;">ğŸª– í—¬ë©§</div>
                    <div class="btn-group" id="helmet-group">
                        <button class="active" onclick="setArmor('helmet', 0)">0</button>
                        <button onclick="setArmor('helmet', 1)">1</button>
                        <button onclick="setArmor('helmet', 2)">2</button>
                        <button onclick="setArmor('helmet', 3)">3</button>
                    </div>
                </div>
            </div>

            <div class="category-filter" id="category-filter">
                <button class="filter-btn active" onclick="filterWeapons('ALL')">ALL</button>
                <button class="filter-btn" onclick="filterWeapons('AR')">AR</button>
                <button class="filter-btn" onclick="filterWeapons('DMR')">DMR</button>
                <button class="filter-btn" onclick="filterWeapons('SR')">SR</button>
                <button class="filter-btn" onclick="filterWeapons('SMG')">SMG</button>
                <button class="filter-btn" onclick="filterWeapons('LMG')">LMG</button>
                <button class="filter-btn" onclick="filterWeapons('SG')">SG</button>
                <button class="filter-btn" onclick="filterWeapons('HG')">ê¶Œì´</button>
            </div>
        </div>

        <div class="weapon-grid" id="weapon-grid"></div>
    </div>

    <div class="result-panel" id="result-panel">
        <div id="panel-content"></div>
        <div style="text-align:center; margin-top:10px; font-size:11px; color:#666;">
            * ëª¨ë“  ìˆ˜ì¹˜ëŠ” í’€íŒŒì¸ (ë³´ì •ê¸°+ì†ì¡ì´+ê°œë¨¸ë¦¬íŒ ë“±) ê¸°ì¤€ì…ë‹ˆë‹¤.
        </div>
    </div>

    <div class="footer">Designed by Mini-hyung for Geon & 3060 Clan</div>

    <script>
        // [ë¦¬ì–¼ë¦¬ì¦˜ íŒ¨ì¹˜] ê±´ì´ì˜ í”¼ë“œë°± ë°˜ì˜
        // SMG(MP5K, Vector, JS9): ì•ˆì •ì„± 97~99 (ë¬´ë°˜ë™ ë ˆì´ì €)
        // M416: ì•ˆì •ì„± 93 (AR ì¤‘ ìµœê³ ì¡´ì—„ì´ì§€ë§Œ SMGë³´ë‹¨ ë°˜ë™ ìˆìŒ)
        // SCAR-L: ì•ˆì •ì„± 91 (M4ë³´ë‹¤ ì—°ì‚¬ê°€ ëŠë ¤ ì²´ê° ë°˜ë™ ë‚®ì§€ë§Œ ìŠ¤í™ìƒ M4 ìš°ìœ„)
        const weapons = [
            { name: "Beryl M762", type: "AR", power: 44, ammo: "7.62mm", img: "Main_BerylM762_C.png", fireRate: 0.086, speed: 715, stability: 65, range: 400 },
            { name: "AKM", type: "AR", power: 47, ammo: "7.62mm", img: "Main_AKM_C.png", fireRate: 0.100, speed: 715, stability: 60, range: 400 },
            { name: "Groza", type: "AR", power: 47, ammo: "7.62mm", img: "Main_Groza_C.png", fireRate: 0.080, speed: 715, stability: 62, range: 400 },
            { name: "ACE32", type: "AR", power: 43, ammo: "7.62mm", img: "Main_Ace32_C.png", fireRate: 0.088, speed: 720, stability: 70, range: 400 },
            { name: "Mk47 Mutant", type: "AR", power: 49, ammo: "7.62mm", img: "Main_Mk47Mutant_C.png", fireRate: 0.100, speed: 780, stability: 65, range: 500 },
            
            // M416: í’€íŒŒì¸  ê¸°ì¤€ 93ì ìœ¼ë¡œ í•˜í–¥ (SMGë³´ë‹¤ëŠ” ë°˜ë™ì´ ìˆìŒ)
            { name: "M416", type: "AR", power: 41, ammo: "5.56mm", img: "Main_M416_C.png", fireRate: 0.086, speed: 880, stability: 93, range: 450 },
            { name: "AUG", type: "AR", power: 41, ammo: "5.56mm", img: "Main_AUG_C.png", fireRate: 0.086, speed: 890, stability: 89, range: 450 },
            { name: "SCAR-L", type: "AR", power: 42, ammo: "5.56mm", img: "Main_ScarL_C.png", fireRate: 0.096, speed: 870, stability: 91, range: 400 },
            { name: "G36C", type: "AR", power: 41, ammo: "5.56mm", img: "Main_G36C_C.png", fireRate: 0.086, speed: 870, stability: 85, range: 400 },
            { name: "QBZ", type: "AR", power: 42, ammo: "5.56mm", img: "Main_QBZ95_C.png", fireRate: 0.092, speed: 870, stability: 92, range: 400 },
            { name: "K2", type: "AR", power: 41, ammo: "5.56mm", img: "Main_K2_C.png", fireRate: 0.086, speed: 880, stability: 82, range: 400 },
            { name: "FAMAS", type: "AR", power: 39, ammo: "5.56mm", img: "Main_FamasG2_C.png", fireRate: 0.067, speed: 900, stability: 78, range: 400 },
            { name: "M16A4", type: "AR", power: 43, ammo: "5.56mm", img: "Main_M16A4_C.png", fireRate: 0.100, speed: 900, stability: 70, range: 500 },
            
            { name: "SLR", type: "DMR", power: 58, ammo: "7.62mm", img: "Main_SLR_C.png", fireRate: 0.100, speed: 840, stability: 55, range: 800 },
            { name: "Dragunov", type: "DMR", power: 60, ammo: "7.62mm", img: "Main_Dragunov_C.png", fireRate: 0.150, speed: 830, stability: 50, range: 800 },
            { name: "SKS", type: "DMR", power: 53, ammo: "7.62mm", img: "Main_SKS_C.png", fireRate: 0.100, speed: 800, stability: 65, range: 800 },
            { name: "Mk14", type: "DMR", power: 61, ammo: "7.62mm", img: "Main_Mk14_C.png", fireRate: 0.090, speed: 853, stability: 40, range: 800 },
            { name: "Mk12", type: "DMR", power: 51, ammo: "5.56mm", img: "Main_Mk12_C.png", fireRate: 0.100, speed: 930, stability: 90, range: 800 },
            { name: "Mini14", type: "DMR", power: 48, ammo: "5.56mm", img: "Main_Mini14_C.png", fireRate: 0.100, speed: 990, stability: 92, range: 800 },
            { name: "QBU", type: "DMR", power: 48, ammo: "5.56mm", img: "Main_QBU88_C.png", fireRate: 0.100, speed: 945, stability: 88, range: 800 },
            { name: "VSS", type: "DMR", power: 41, ammo: "9mm", img: "Main_VSS_C.png", fireRate: 0.086, speed: 330, stability: 95, range: 400 },
            { name: "AWM", type: "SR", power: 105, ammo: ".300", img: "Main_AWM_C.png", fireRate: 1.85, speed: 945, stability: 90, range: 1000 },
            { name: "Kar98k", type: "SR", power: 79, ammo: "7.62mm", img: "Main_Kar98k_C.png", fireRate: 1.9, speed: 760, stability: 90, range: 800 },
            { name: "M24", type: "SR", power: 75, ammo: "7.62mm", img: "Main_M24_C.png", fireRate: 1.8, speed: 790, stability: 90, range: 800 },
            
            // SMG: MP5K, Vector ë“±ì€ í’€íŒŒì¸  ì‹œ ë¬´ë°˜ë™ ë ˆì´ì € (97~99)
            { name: "P90", type: "SMG", power: 35, ammo: "5.7mm", img: "Main_P90_C.png", fireRate: 0.050, speed: 400, stability: 100, range: 200 },
            { name: "Vector", type: "SMG", power: 31, ammo: "9mm", img: "Main_Vector_C.png", fireRate: 0.055, speed: 350, stability: 98, range: 150 },
            { name: "UMP", type: "SMG", power: 41, ammo: ".45 ACP", img: "Main_UMP45_C.png", fireRate: 0.092, speed: 360, stability: 97, range: 200 },
            { name: "MP5K", type: "SMG", power: 33, ammo: "9mm", img: "Main_MP5K_C.png", fireRate: 0.067, speed: 380, stability: 99, range: 200 },
            { name: "Micro UZI", type: "SMG", power: 26, ammo: "9mm", img: "Main_UZI_C.png", fireRate: 0.048, speed: 350, stability: 88, range: 150 },
            { name: "Tommy Gun", type: "SMG", power: 40, ammo: ".45 ACP", img: "Main_TommyGun_C.png", fireRate: 0.086, speed: 280, stability: 75, range: 200 },
            { name: "JS9", type: "SMG", power: 35, ammo: "9mm", img: "Main_JS9_C.png", fireRate: 0.060, speed: 400, stability: 100, range: 200 },
            
            { name: "MG3", type: "LMG", power: 40, ammo: "7.62mm", img: "Main_MG3_C.png", fireRate: 0.060, speed: 820, stability: 75, range: 500 },
            { name: "DP-28", type: "LMG", power: 51, ammo: "7.62mm", img: "Main_DP28_C.png", fireRate: 0.109, speed: 715, stability: 80, range: 500 },
            { name: "M249", type: "LMG", power: 40, ammo: "5.56mm", img: "Main_M249_C.png", fireRate: 0.075, speed: 915, stability: 55, range: 500 },
            { name: "DBS", type: "SG", power: 26, ammo: "12 Gauge", img: "Main_DBS_C.png", fireRate: 0.5, speed: 360, stability: 50, range: 50 },
            { name: "S1897", type: "SG", power: 24, ammo: "12 Gauge", img: "Main_Winchester1897_C.png", fireRate: 0.75, speed: 360, stability: 40, range: 40 },
            { name: "S686", type: "SG", power: 24, ammo: "12 Gauge", img: "Main_S686_C.png", fireRate: 0.2, speed: 370, stability: 60, range: 40 },
            { name: "S12K", type: "SG", power: 22, ammo: "12 Gauge", img: "Main_Saiga12_C.png", fireRate: 0.25, speed: 350, stability: 40, range: 40 }
        ];

        const imgBaseUrl = "https://raw.githubusercontent.com/pubg/api-assets/master/Assets/Icons/Item/Weapon/Main";
        let currentVest = 0;
        let currentHelmet = 0;
        let currentDistance = 0;
        let selectedCategory = 'ALL';
        
        let selIdx1 = null;
        let selIdx2 = null;

        const grid = document.getElementById('weapon-grid');
        const panel = document.getElementById('result-panel');
        const panelContent = document.getElementById('panel-content');

        function initWeapons() {
            grid.innerHTML = '';
            weapons.sort((a, b) => b.power - a.power);
            weapons.forEach((w, index) => {
                const card = document.createElement('div');
                card.className = 'weapon-card';
                card.dataset.type = w.type;
                card.dataset.index = index;
                card.onclick = () => selectWeapon(index);
                
                const imgSrc = `${imgBaseUrl}/${w.img}`;
                card.innerHTML = `
                    <div class="dmg-badge">${w.power}</div>
                    <img src="${imgSrc}" class="weapon-img" alt="${w.name}" onerror="this.src='https://via.placeholder.com/100x50?text=${w.type}'">
                    <span class="weapon-name">${w.name}</span>
                    <div class="badge-row">
                        <span class="badge ${w.type}">${w.type}</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterWeapons(category) {
            selectedCategory = category;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === (category==='HG'?'ê¶Œì´':category));
            });
            document.querySelectorAll('.weapon-card').forEach(card => {
                if (selectedCategory === 'ALL' || card.dataset.type === selectedCategory) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        function setArmor(type, level) {
            if (type === 'vest') currentVest = level;
            if (type === 'helmet') currentHelmet = level;
            document.getElementById(type + '-group').querySelectorAll('button').forEach((btn, idx) => {
                btn.className = (idx === level) ? 'active' : '';
            });
            updatePanel();
        }

        function updateDistance(val) {
            currentDistance = parseInt(val);
            document.getElementById('dist-val').innerText = currentDistance;
            updatePanel();
        }

        function selectWeapon(index) {
            if (selIdx1 === index) { selIdx1 = null; selIdx2 = null; }
            else if (selIdx1 === null) { selIdx1 = index; }
            else if (selIdx2 === index) { selIdx2 = null; } 
            else if (selIdx2 === null) { selIdx2 = index; } 
            else { selIdx1 = index; selIdx2 = null; } 

            document.querySelectorAll('.weapon-card').forEach(c => {
                c.classList.remove('active-1', 'active-2');
                const idx = parseInt(c.dataset.index);
                if (idx === selIdx1) c.classList.add('active-1');
                if (idx === selIdx2) c.classList.add('active-2');
            });

            updatePanel();
        }

        function getCalculatedStats(weapon) {
            const reduction = { 0: 0, 1: 0.30, 2: 0.40, 3: 0.55 };
            
            let distFactor = 1.0;
            if (weapon.type === 'SR' && currentDistance > 100) distFactor = Math.max(0.9, 1 - (currentDistance-100)*0.0001);
            else if (weapon.type === 'DMR' && currentDistance > 100) distFactor = Math.max(0.7, 1 - (currentDistance-100)*0.0005);
            else if (['AR','LMG'].includes(weapon.type) && currentDistance > 50) distFactor = Math.max(0.55, 1 - (currentDistance-50)*0.0008);
            else if (['SMG','HG'].includes(weapon.type) && currentDistance > 30) distFactor = Math.max(0.3, 1 - (currentDistance-30)*0.002);
            else if (weapon.type === 'SG' && currentDistance > 10) distFactor = Math.max(0.05, 1 - (currentDistance-10)*0.05);

            const distDmg = weapon.power * distFactor;
            
            // DPS ê³„ì‚° (í˜„ì¬ ë°ë¯¸ì§€ / ë°œì‚¬ê°„ê²©)
            const dps = (weapon.type === 'SR' || weapon.type === 'SG') ? '-' : (distDmg / weapon.fireRate).toFixed(0);

            let headMult = (weapon.type === 'SR') ? 2.5 : 2.35;
            if (weapon.type === 'SG') headMult = 1.5;

            const finalChest = distDmg * (1 - reduction[currentVest]);
            const finalHead = distDmg * headMult * (1 - reduction[currentHelmet]);
            
            const htkChest = finalChest < 1 ? 99 : Math.ceil(100 / finalChest);
            const htkHead = finalHead < 1 ? 99 : Math.ceil(100 / finalHead);

            return { distDmg, dps, finalChest, finalHead, htkChest, htkHead };
        }

        function updatePanel() {
            if (selIdx1 === null) {
                panel.classList.remove('show');
                return;
            }
            panel.classList.add('show');

            const w1 = weapons[selIdx1];
            const s1 = getCalculatedStats(w1);
            
            // í¬ë§·íŒ… í•¨ìˆ˜
            const renderRow = (label, val1, val2, colorFunc) => {
                const c = colorFunc(val1, val2);
                return `<tr><td class="col-label">${label}</td><td class="col-w1 ${c[0]}">${val1}</td><td class="col-w2 ${c[1]}">${val2}</td></tr>`;
            };

            const singleRow = (label, val1) => {
                return `<tr><td class="col-label">${label}</td><td class="col-w1">${val1}</td></tr>`;
            };

            if (selIdx2 === null) {
                // ë‹¨ì¼ ë·°
                panelContent.innerHTML = `
                    <div style="display:flex; align-items:center; margin-bottom:15px;">
                        <img src="${imgBaseUrl}/${w1.img}" style="width:80px; height:40px; object-fit:contain; margin-right:10px;">
                        <div>
                            <div class="w1-name">${w1.name}</div>
                            <div style="font-size:12px; color:#888;">${w1.type} / ${w1.ammo}</div>
                        </div>
                    </div>
                    <div class="section-header">ê¸°ë³¸ ìŠ¤í™ (í’€íŒŒì¸  ê¸°ì¤€)</div>
                    <table class="comp-table">
                        ${singleRow('1ë°œë‹¹ ë°ë¯¸ì§€', w1.power)}
                        ${singleRow('ì´ˆë‹¹ ë°ë¯¸ì§€', s1.dps)}
                        ${singleRow('ë°œì‚¬ ì†ë„', w1.fireRate + 's')}
                        ${singleRow('íƒ„ì†', w1.speed + ' m/s')}
                        ${singleRow('ì•ˆì •ì„±', w1.stability + '/100')}
                        ${singleRow('ìœ íš¨ ì‚¬ê±°ë¦¬', w1.range + ' m')}
                    </table>
                    <div class="section-header" style="margin-top:10px;">ì‹¤ì „ ë°ë¯¸ì§€ (${currentDistance}m)</div>
                    <table class="comp-table">
                        ${singleRow('ê±°ë¦¬ ë°ë¯¸ì§€', s1.distDmg.toFixed(1))}
                        ${singleRow('ê°€ìŠ´ (ì¡°ë¼)', s1.finalChest.toFixed(1))}
                        ${singleRow('í—¤ë“œ (í—¬ë©§)', s1.finalHead.toFixed(1))}
                        <tr><td class="col-label">í‚¬ í™•ì •</td><td class="col-w1">ê°€ìŠ´ ${s1.htkChest}ë°œ / í—¤ë“œ ${s1.htkHead}ë°œ</td></tr>
                    </table>
                `;
            } else {
                // ë¹„êµ ë·°
                const w2 = weapons[selIdx2];
                const s2 = getCalculatedStats(w2);

                const cmp = (v1, v2, isLow=false) => {
                    if (v1 == '-' || v2 == '-') return ['', ''];
                    const n1 = parseFloat(v1), n2 = parseFloat(v2);
                    if (Math.abs(n1 - n2) < 0.01) return ['', ''];
                    if (isLow) return n1 < n2 ? ['better', 'worse'] : ['worse', 'better'];
                    return n1 > n2 ? ['better', 'worse'] : ['worse', 'better'];
                };

                panelContent.innerHTML = `
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <div style="text-align:center; width:45%;"><div class="w1-name" style="font-size:14px;">${w1.name}</div></div>
                        <div class="vs-badge">VS</div>
                        <div style="text-align:center; width:45%;"><div class="w2-name" style="font-size:14px;">${w2.name}</div></div>
                    </div>
                    
                    <div class="section-header">ìƒì„¸ ìŠ¤í™ ë¹„êµ (í’€íŒŒì¸ )</div>
                    <table class="comp-table">
                        ${renderRow('1ë°œë‹¹ ë°ë¯¸ì§€', w1.power, w2.power, (a,b)=>cmp(a,b))}
                        ${renderRow('ì´ˆë‹¹ ë°ë¯¸ì§€', s1.dps, s2.dps, (a,b)=>cmp(a,b))}
                        ${renderRow('ì—°ì‚¬ì†ë„', w1.fireRate, w2.fireRate, (a,b)=>cmp(a,b,true))}
                        ${renderRow('íƒ„ì†', w1.speed, w2.speed, (a,b)=>cmp(a,b))}
                        ${renderRow('ì•ˆì •ì„±', w1.stability, w2.stability, (a,b)=>cmp(a,b))}
                        ${renderRow('ì‚¬ê±°ë¦¬', w1.range, w2.range, (a,b)=>cmp(a,b))}
                    </table>

                    <div class="section-header" style="margin-top:5px;">ì‹¤ì „ ë°ë¯¸ì§€ (${currentDistance}m)</div>
                    <table class="comp-table">
                        ${renderRow('ê±°ë¦¬ ë°ë¯¸ì§€', s1.distDmg.toFixed(1), s2.distDmg.toFixed(1), (a,b)=>cmp(a,b))}
                        ${renderRow('ê°€ìŠ´', s1.finalChest.toFixed(1), s2.finalChest.toFixed(1), (a,b)=>cmp(a,b))}
                        ${renderRow('í—¤ë“œ', s1.finalHead.toFixed(1), s2.finalHead.toFixed(1), (a,b)=>cmp(a,b))}
                        ${renderRow('ê°€ìŠ´í‚¬', s1.htkChest+'ë°œ', s2.htkChest+'ë°œ', (a,b)=>cmp(parseFloat(a),parseFloat(b),true))}
                        ${renderRow('í—¤ë“œí‚¬', s1.htkHead+'ë°œ', s2.htkHead+'ë°œ', (a,b)=>cmp(parseFloat(a),parseFloat(b),true))}
                    </table>
                `;
            }
        }

        initWeapons();
    </script>
</body>
</html>
